
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Explained - Community operators</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#testing-your-operator-with-operator-framework" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Community operators" class="md-header__button md-logo" aria-label="Community operators" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Community operators
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Explained
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/operator-framework/community-operators" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    community-operators
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Overview
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../packaging-operator/" class="md-tabs__link">
        Packaging your Operator for OperatorHub
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="./" class="md-tabs__link md-tabs__link--active">
        Testing
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../contributing-prerequisites/" class="md-tabs__link">
        Contributing
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../operator-release-process/" class="md-tabs__link">
      Release process
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../action/" class="md-tabs__link">
      Github Action
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../best-practices/" class="md-tabs__link">
      Best practices
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../troubleshooting/" class="md-tabs__link">
      Troubleshooting
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../maintainer-documentation/" class="md-tabs__link">
      Maintainer
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../stats/" class="md-tabs__link">
      Statistics
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Community operators" class="md-nav__button md-logo" aria-label="Community operators" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Community operators
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/operator-framework/community-operators" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    community-operators
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Packaging your Operator for OperatorHub
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Packaging your Operator for OperatorHub" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Packaging your Operator for OperatorHub
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging-operator/" class="md-nav__link">
        Operator structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging-required-fields/" class="md-nav__link">
        Required fields
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Explained
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Explained
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-k8s-community-operators-operatorhubio" class="md-nav__link">
    FOR K8S COMMUNITY OPERATORS (OperatorHub.io)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-openshift-community-operators" class="md-nav__link">
    FOR OPENSHIFT COMMUNITY OPERATORS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accepted-contribution-formats" class="md-nav__link">
    Accepted Contribution formats
  </a>
  
    <nav class="md-nav" aria-label="Accepted Contribution formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bundle-format-supported-with-0140-or-newer" class="md-nav__link">
    bundle format (supported with 0.14.0 or newer)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#legacy-packagemanifest-format-mandatory-for-all-olm-versions-prior-to-0140-and-earlier-supported-on-all-available-versions" class="md-nav__link">
    (Legacy) packagemanifest format (mandatory for all OLM versions prior to 0.14.0 and earlier, supported on all available versions)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    Pre-Requisites
  </a>
  
    <nav class="md-nav" aria-label="Pre-Requisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes-cluster" class="md-nav__link">
    Kubernetes cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container-tooling" class="md-nav__link">
    Container Tooling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-framework-components" class="md-nav__link">
    Operator Framework components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparing-file-structure" class="md-nav__link">
    Preparing file structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operator-metadata-validation" class="md-nav__link">
    Operator Metadata Validation
  </a>
  
    <nav class="md-nav" aria-label="Operator Metadata Validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#temporary-conversion-of-packagemanifest-to-bundle" class="md-nav__link">
    Temporary conversion of packagemanifest to bundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-operator-sdk-to-validate-your-operator" class="md-nav__link">
    Using operator-sdk to validate your Operator
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publishing-your-operator-metadata-to-a-catalog-for-testing" class="md-nav__link">
    Publishing your Operator metadata to a catalog for testing
  </a>
  
    <nav class="md-nav" aria-label="Publishing your Operator metadata to a catalog for testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-a-catalog-using-packagemanifest-format" class="md-nav__link">
    Building a catalog using packagemanifest format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-a-catalog-using-bundles" class="md-nav__link">
    Building a catalog using bundles
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-operator-deployment-on-kubernetes" class="md-nav__link">
    Testing Operator Deployment on Kubernetes
  </a>
  
    <nav class="md-nav" aria-label="Testing Operator Deployment on Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-installing-operator-lifecycle-manager" class="md-nav__link">
    1. Installing Operator Lifecycle Manager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-adding-the-catalog-containing-your-operator" class="md-nav__link">
    2. Adding the catalog containing your Operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-view-available-operators" class="md-nav__link">
    3. View Available Operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-create-an-operatorgroup" class="md-nav__link">
    4. Create an OperatorGroup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-create-a-subscription" class="md-nav__link">
    5. Create a Subscription
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-verify-operator-health" class="md-nav__link">
    6. Verify Operator health
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-operator-deployment-on-openshift" class="md-nav__link">
    Testing Operator Deployment on OpenShift
  </a>
  
    <nav class="md-nav" aria-label="Testing Operator Deployment on OpenShift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-the-catalogsource" class="md-nav__link">
    1. Create the CatalogSource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-find-your-operator-in-the-operatorhub-ui" class="md-nav__link">
    2. Find your Operator in the OperatorHub UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-install-your-operator-from-operatorhub" class="md-nav__link">
    3. Install your Operator from OperatorHub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-verify-operator-health" class="md-nav__link">
    4. Verify Operator health
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-with-scorecard" class="md-nav__link">
    Testing with scorecard
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    Additional Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operator-test-suite/" class="md-nav__link">
        Via test suite
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contributing" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contributing-prerequisites/" class="md-nav__link">
        Prerequisites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contributing-where-to/" class="md-nav__link">
        Where to place operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contributing-via-pr/" class="md-nav__link">
        Creating pull request (PR)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operator-ci-yaml/" class="md-nav__link">
        Operator Publishing / Review settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tests-in-pr/" class="md-nav__link">
        Tests in PR explained
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operator-version-update/" class="md-nav__link">
        Updating existing Operators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operator-overwrite/" class="md-nav__link">
        Updating published Operator version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../self-merge-updates/" class="md-nav__link">
        How do i deploy operator faster?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging-required-criteria-ocp/" class="md-nav__link">
        OKD/OpenShift Catalogs criteria and options
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../operator-release-process/" class="md-nav__link">
        Release process
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../action/" class="md-nav__link">
        Github Action
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../best-practices/" class="md-nav__link">
        Best practices
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../maintainer-documentation/" class="md-nav__link">
        Maintainer
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../stats/" class="md-nav__link">
        Statistics
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/operator-framework/community-operators/edit/master/docs/testing-operators.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="testing-your-operator-with-operator-framework">Testing your Operator with Operator Framework</h1>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<!-- **Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*-->

<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#accepted-contribution-formats">Accepted Contribution formats</a></li>
<li><a href="#packagemanifest-format-mandatory-for-all-olm-versions-prior-to-0140-and-earlier-supported-on-all-available-versions"><em>packagemanifest</em> format (mandatory for all OLM versions prior to 0.14.0 and earlier, supported on all available versions)</a></li>
<li><a href="#bundle-format-supported-with-0140-or-newer"><em>bundle</em> format (supported with 0.14.0 or newer)</a></li>
<li><a href="#pre-requisites">Pre-Requisites</a></li>
<li><a href="#kubernetes-cluster">Kubernetes cluster</a></li>
<li><a href="#container-tooling">Container Tooling</a></li>
<li><a href="#operator-framework-components">Operator Framework components</a></li>
<li><a href="#preparing-file-structure">Preparing file structure</a></li>
<li><a href="#operator-metadata-validation">Operator Metadata Validation</a></li>
<li><a href="#temporary-conversion-of-packagemanifest-to-bundle">Temporary conversion of packagemanifest to bundle</a></li>
<li><a href="#using-operator-sdk-to-validate-your-operator">Using operator-sdk to validate your Operator</a></li>
<li><a href="#publishing-your-operator-metadata-to-a-catalog-for-testing">Publishing your Operator metadata to a catalog for testing</a></li>
<li><a href="#building-a-catalog-using-packagemanifest-format">Building a catalog using <code>packagemanifest</code> format</a></li>
<li><a href="#building-a-catalog-using-bundles">Building a catalog using bundles</a></li>
<li><a href="#testing-operator-deployment-on-kubernetes">Testing Operator Deployment on Kubernetes</a></li>
<li><a href="#1-installing-operator-lifecycle-manager">1. Installing Operator Lifecycle Manager</a><ul>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li><a href="#2-adding-the-catalog-containing-your-operator">2. Adding the catalog containing your Operator</a><ul>
<li><a href="#troubleshooting-1">Troubleshooting</a></li>
</ul>
</li>
<li><a href="#3-view-available-operators">3. View Available Operators</a><ul>
<li><a href="#troubleshooting-2">Troubleshooting</a></li>
</ul>
</li>
<li><a href="#4-create-an-operatorgroup">4. Create an OperatorGroup</a></li>
<li><a href="#5-create-a-subscription">5. Create a Subscription</a><ul>
<li><a href="#troubleshooting-3">Troubleshooting</a></li>
</ul>
</li>
<li><a href="#6-verify-operator-health">6. Verify Operator health</a><ul>
<li><a href="#troubleshooting-4">Troubleshooting</a></li>
</ul>
</li>
<li><a href="#testing-operator-deployment-on-openshift">Testing Operator Deployment on OpenShift</a></li>
<li><a href="#1-create-the-catalogsource">1. Create the CatalogSource</a></li>
<li><a href="#2-find-your-operator-in-the-operatorhub-ui">2. Find your Operator in the OperatorHub UI</a></li>
<li><a href="#3-install-your-operator-from-operatorhub">3. Install your Operator from OperatorHub</a></li>
<li><a href="#4-verify-operator-health">4. Verify Operator health</a></li>
<li><a href="#testing-with-scorecard">Testing with scorecard</a></li>
<li><a href="#additional-resources">Additional Resources</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<h2 id="overview">Overview</h2>
<p>These instructions walk you through how to manually test that your Operator deploys correctly with Operator Framework when packaged for the Operator Lifecycle Manager. Although your submission will always be tested as part of the <a href="../tests-in-pr/">CI</a> you can accelerate the process by testing locally.</p>
<blockquote>
<p>The tests described in this document can also be executed automatically in a single step using a <a href="../operator-test-suite/">test suite</a></p>
</blockquote>
<p>However, note that you can easily check and test your bundles via <a href="https://sdk.operatorframework.io/docs/cli/operator-sdk_bundle_validate/"><code>operator-sdk bundle validate</code></a>:</p>
<div class="highlight"><pre><span></span><code>operator-sdk bundle validate ./bundle --select-optional <span class="nv">suite</span><span class="o">=</span>operatorframework
</code></pre></div>
<p><strong>NOTE</strong> For further information about the options available with <code>operator-sdk bundle validate</code> run <code>operator-sdk bundle validate --list-optional</code> and <code>operator-sdk bundle validate --help</code>.</p>
<p>And then, if you used <a href="https://github.com/operator-framework/operator-sdk">operator-sdk</a> to build your project and bundle you can leverage in <a href="https://sdk.operatorframework.io/docs/cli/operator-sdk_scorecard/"><code>operator-sdk scorecard</code></a>:</p>
<div class="highlight"><pre><span></span><code>operator-sdk scorecard bundle
</code></pre></div>
<h3 id="for-k8s-community-operators-operatorhubio">FOR K8S COMMUNITY OPERATORS (OperatorHub.io)</h3>
<p>For K8s community operators make sure you understand and performed the required additional checks before publishing your 
PR in the repository <a href="https://github.com/k8s-operatorhub/community-operators">k8s-operatorhub/community-operators</a>.
to distribute your Operator in <a href="https://operatorhub.io/">OperatorHub.io</a>.</p>
<p>In this case, you can verify it specific criteria to distribute your Operator in this Index Catalog by also checking 
your bundle with the <a href="https://github.com/k8s-operatorhub/bundle-validator">K8S Community Bundle Validator</a>, e.g:</p>
<div class="highlight"><pre><span></span><code>k8s-community-bundle-validator &lt;bundle-path&gt;
</code></pre></div>
<h3 id="for-openshift-community-operators">FOR OPENSHIFT COMMUNITY OPERATORS</h3>
<p>For Openshift community operators make sure you understand and performed the required additional checks before publishing 
your PR in the repository <a href="https://github.com/redhat-openshift-ecosystem/community-operators-prod">redhat-openshift-ecosystem/community-operators-prod</a> 
to distribute your Operator in Openshift and OKD catalogs. See <a href="../packaging-required-criteria-ocp/">OKD/OpenShift Catalogs criteria and options</a>.</p>
<h2 id="accepted-contribution-formats">Accepted Contribution formats</h2>
<p>The process below assumes that you have a Kubernetes Operator in either of the two following formats supported by the Operator Framework:</p>
<h3 id="bundle-format-supported-with-0140-or-newer"><em>bundle</em> format (supported with 0.14.0 or newer)</h3>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>tree my-operator/

<span class="go">my-operator</span>
<span class="go">├── 0.1.0</span>
<span class="go">│   ├── manifests</span>
<span class="go">│   │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">│   │   └── my-operator.v0.1.0.clusterserviceversion.yaml</span>
<span class="go">│   ├── metadata</span>
<span class="go">│   │   └── annotations.yaml</span>
<span class="go">│   └── Dockerfile</span>
<span class="go">├── 0.5.0</span>
<span class="go">│   ├── manifests</span>
<span class="go">│   │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">│   │   └── my-operator.v0.5.0.clusterserviceversion.yaml</span>
<span class="go">│   ├── metadata</span>
<span class="go">│   │   └── annotations.yaml</span>
<span class="go">│   └── Dockerfile</span>
<span class="go">└── 1.0.0</span>
<span class="go">    ├── manifests</span>
<span class="go">    │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">    │   └── my-operator.v1.0.0.clusterserviceversion.yaml</span>
<span class="go">    ├── metadata</span>
<span class="go">    │   └── annotations.yaml</span>
<span class="go">    └── Dockerfile</span>
<span class="go">...</span>
</code></pre></div>
<h3 id="legacy-packagemanifest-format-mandatory-for-all-olm-versions-prior-to-0140-and-earlier-supported-on-all-available-versions">(Legacy) <em>packagemanifest</em> format (mandatory for all OLM versions prior to 0.14.0 and earlier, supported on all available versions)</h3>
<p><strong>NOTE</strong> It is recommended to use the <code>bundle</code> format instead. This format is still valid for backward compatibility only and at some point will no longer be supported.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>tree my-operator/

<span class="go">my-operator</span>
<span class="go">├── 0.1.0</span>
<span class="go">│   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   └── my-operator.v0.1.0.clusterserviceversion.yaml</span>
<span class="go">├── 0.5.0</span>
<span class="go">│   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   ├── my-operator-crd3.crd.yaml</span>
<span class="go">│   └── my-operator.v0.5.0.clusterserviceversion.yaml</span>
<span class="go">├── 1.0.0</span>
<span class="go">│   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   ├── my-operator-crd3.crd.yaml</span>
<span class="go">│   └── my-operator.v1.0.0.clusterserviceversion.yaml</span>
<span class="go">└── my-operator.package.yaml</span>
</code></pre></div>
<p>In both examples above <em>my-operator</em> is the name of your Operator which is available in 3 versions: <code>0.1.0</code>, <code>0.5.0</code> and <code>1.0.0</code>. If you are new to this or don't have this format yet, refer to our <a href="../packaging-operator/#package-your-operator">contribution documentation</a>. We will refer to both formats distinctively below where required.</p>
<blockquote>
<p>Mixing <code>packagemanifest</code> style and <code>bundle</code> format style Operator versions in a single Operator package <strong>is not supported</strong>. All versions all need to be in either one or the other format.</p>
</blockquote>
<h2 id="pre-requisites">Pre-Requisites</h2>
<h3 id="kubernetes-cluster">Kubernetes cluster</h3>
<p>For "<strong>upstream-community</strong>" operators targeting Kubernetes and <a href="https://operatorhub.io">OperatorHub.io</a>:
* A running Kubernetes cluster; <a href="https://kubernetes.io/docs/setup/minikube/">minikube</a> or <a href="https://kind.sigs.k8s.io/">Kubernetes-in-Docker</a> is the simplest approach</p>
<p>For "<strong>community</strong>" operators targeting OCP/OKD and OperatorHub on OpenShift:
* access to a running production-like OpenShift 4 cluster, use <a href="https://try.openshift.com/">try.openshift.com</a> to get a cluster on an infrastructure of your choice
* or access to an all-in-one OpenShift 4 cluster, use <a href="https://cloud.redhat.com/openshift/install/crc/installer-provisioned">CodeReady Containers</a> to get a cluster on your local machine</p>
<h3 id="container-tooling">Container Tooling</h3>
<p>You need an OCI-compatible container toolchain on the system where you test your Operator. Support options are:</p>
<ul>
<li><a href="https://podman.io/">podman</a></li>
<li><a href="https://buildah.io/">buildah</a></li>
<li>moby (aka <em>docker-ce</em> aka <em>docker</em>)</li>
</ul>
<h3 id="operator-framework-components">Operator Framework components</h3>
<p>The following parts of the framework are used throughout the process and should be downloaded and put in your executable search path (Linux and Mac are supported):</p>
<ul>
<li><a href="https://github.com/operator-framework/operator-registry/releases/latest">opm</a></li>
<li><a href="https://github.com/operator-framework/operator-sdk/releases/latest">operator-sdk</a></li>
</ul>
<h3 id="preparing-file-structure">Preparing file structure</h3>
<p>Finally, if you haven't already done so, please clone this repository as well and create a branch:</p>
<div class="highlight"><pre><span></span><code><span class="go">git clone https://github.com/operator-framework/community-operators.git</span>
<span class="go">cd community-operators/</span>
<span class="go">git branch my-operator</span>
</code></pre></div>
<p>For simplicity (and if your Operator has dependencies on other community Operators) put your <code>my-operator</code> directory in either of the <strong>community-operators</strong> (for OpenShift's OperatorHub) or <strong>upstream-community-operators</strong> (for OperatorHub.io) directory (or both).</p>
<div class="highlight"><pre><span></span><code><span class="go">cp -R my-operator/ community-operators/upstream-community-operators/</span>
</code></pre></div>
<blockquote>
<p>The name of the directory <code>my-operator/</code> needs to match the Operator package name (without the slash) in either <code>package.yaml</code> (if you are using the <code>packagemanifest</code> format) or the container image label <code>operators.operatorframework.io.bundle.package.v1</code> in the <code>Dockerfile</code> and <code>annotations.yaml</code> (if you are using the <code>bundle</code> format).</p>
</blockquote>
<p>If you are just adding a new version of your Operator, please create a subdirectory following <a href="https://semver.org">semver</a> conventions in your existing package directory, for example:</p>
<div class="highlight"><pre><span></span><code><span class="go">cp -R my-operator/2.0.0 community-operators/upstream-community-operators/my-operator/</span>
</code></pre></div>
<blockquote>
<p>If you are using the <code>packagemanifest</code> format, don't forget to update the <code>package.yaml</code> file in the top-level directory to point to your new version/channels.</p>
</blockquote>
<h2 id="operator-metadata-validation">Operator Metadata Validation</h2>
<p>If you are using <code>packagemanifest</code> format you will need to convert your metadata to <code>bundle</code> format for the validation step.</p>
<h3 id="temporary-conversion-of-packagemanifest-to-bundle">Temporary conversion of packagemanifest to bundle</h3>
<p>Suppose <code>v2.0.0</code> is the version of the Operator you want to test convert to bundle format directory with the <code>opm</code> tool:</p>
<div class="highlight"><pre><span></span><code><span class="go">mkdir /tmp/my-operator-2.0.0-bundle/</span>
<span class="go">cd /tmp/my-operator-2.0.0-bundle/</span>
<span class="go">opm alpha bundle build --directory /path/to/my-operator/2.0.0/ --tag my-operator-bundle:v2.0.0 --output-dir .</span>
</code></pre></div>
<p>This will have generated the bundle format layout in the current working directory <code>/tmp/my-operator-2.0.0-bundle/</code>:</p>
<p><div class="highlight"><pre><span></span><code><span class="gp">$ </span>tree .

<span class="go">/tmp/my-operator-2.0.0-bundle/</span>
<span class="go">├── manifests</span>
<span class="go">│   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   ├── my-operator-crd3.crd.yaml</span>
<span class="go">│   └── my-operator.v2.0.0.clusterserviceversion.yaml</span>
<span class="go">├── metadata</span>
<span class="go">│   └── annotations.yaml</span>
<span class="go">└── bundle.Dockerfile</span>
</code></pre></div>
Run the following validation command of the <code>operator-sdk</code> from within this directory.</p>
<div class="highlight"><pre><span></span><code><span class="go">operator-sdk bundle validate /tmp/my-operator-2.0.0-bundle/ --select-optional name=operatorhub</span>
</code></pre></div>
<h3 id="using-operator-sdk-to-validate-your-operator">Using operator-sdk to validate your Operator</h3>
<blockquote>
<p>Validation using <code>operator-sdk</code> is only supported using the <code>bundle</code> format layout. See the previous step if you need to convert from <code>packagemanifest</code>.</p>
</blockquote>
<p>Validation is done on a per-Operator version basis. If you are not already in the Operator versions directory, switch to it now, e.g.</p>
<div class="highlight"><pre><span></span><code><span class="go">cd my-operator/2.0.0/</span>
</code></pre></div>
<p>With the Operator in bundle format use the <code>operator-sdk</code> to validate your bundle with the additional rules for community submissions:</p>
<div class="highlight"><pre><span></span><code><span class="go">operator-sdk bundle validate --select-optional name=operatorhub .</span>
</code></pre></div>
<p>The output might look similar to this:</p>
<div class="highlight"><pre><span></span><code><span class="go">INFO[0000] Found annotations file                        bundle-dir=. container-tool=docker</span>
<span class="go">INFO[0000] Could not find optional dependencies file     bundle-dir=. container-tool=docker</span>
<span class="go">INFO[0000] All validation tests have completed successfully</span>
</code></pre></div>
<p>If there are any errors or warnings they will be displayed there. The <code>container-tool</code> will be automatically determined given your environment. If you want to force to use <code>podman</code> instead of <code>docker</code>, supply the <code>-b</code> switch to the <code>operator-sdk bundle validate</code> command.</p>
<p>Any warnings here might turn into failing pipeline tests here. Please correct all issues displayed. A list of fields that are scanned can also be reviewed with <a href="https://github.com/operator-framework/community-operators/blob/master/docs/packaging-required-fields.md">this list</a>.</p>
<h2 id="publishing-your-operator-metadata-to-a-catalog-for-testing">Publishing your Operator metadata to a catalog for testing</h2>
<h3 id="building-a-catalog-using-packagemanifest-format">Building a catalog using <code>packagemanifest</code> format</h3>
<p>When your Operator metadata is formatted in <code>packagemanifest</code> layout you need to place it in the directory structure of the <code>community-operators</code> repository, according to <a href="#preparing-file-structure">pre-requisites step</a>.</p>
<p>For example, assuming version <code>2.0.0</code> is the version you like to test:</p>
<p><div class="highlight"><pre><span></span><code><span class="gp">$ </span>tree upstream-community-operators/

<span class="go">upstream-community-operators/</span>
<span class="go">│</span>
<span class="go">...</span>
<span class="go">│</span>
<span class="go">└──my-operator/</span>
<span class="go">    ├── 0.1.0</span>
<span class="go">    │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">    │   └── my-operator.v0.1.0.clusterserviceversion.yaml</span>
<span class="go">    ├── 0.5.0</span>
<span class="go">    │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">    │   └── my-operator.v0.5.0.clusterserviceversion.yaml</span>
<span class="go">    ├── 1.0.0</span>
<span class="go">    │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">    │   └── my-operator.v1.0.0.clusterserviceversion.yaml</span>
<span class="go">    ├── 2.0.0</span>
<span class="go">    │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">    │   └── my-operator.v2.0.0.clusterserviceversion.yaml</span>
<span class="go">    └── my-operator.package.yaml</span>
</code></pre></div>
You can build a catalog for OLM containing either all Operators or just yours with a <code>Dockerfile</code> like <a href="https://github.com/operator-framework/operator-registry/blob/master/upstream-example.Dockerfile">this</a></p>
<p><div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">quay.io/operator-framework/upstream-registry-builder</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="s">builder</span>

<span class="k">COPY</span><span class="w"> </span>upstream-community-operators manifests
<span class="k">RUN</span><span class="w"> </span>/bin/initializer -o ./bundles.db

<span class="k">FROM</span><span class="w"> </span><span class="s">scratch</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder /etc/nsswitch.conf /etc/nsswitch.conf
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder /bundles.db /bundles.db
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder /bin/registry-server /registry-server
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder /bin/grpc_health_probe /bin/grpc_health_probe
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">50051</span>
<span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/registry-server&quot;</span><span class="p">]</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;--database&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bundles.db&quot;</span><span class="p">]</span>
</code></pre></div>
Simply adjust the second line to either include all OpenShift Community Operators (<code>community-operators</code>), all OperatorHub.io Operators (<code>upstream-community-operators</code>) or just your Operator (e.g. <code>upstream-community-operator/my-operator</code>).</p>
<p>Place the <code>Dockerfile</code> in the top-level directory of your cloned copy of this repo, build it and push it to a registry from where you can download it to your Kubernetes cluster later.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="go">podman build -f catalog.Dockerfile -t my-test-catalog:latest .</span>
<span class="go">podman tag my-test-catalog:latest quay.io/myaccount/my-test-catalog:latest</span>
<span class="go">podman push quay.io/myaccount/my-test-catalog:latest</span>
</code></pre></div>
<h3 id="building-a-catalog-using-bundles">Building a catalog using bundles</h3>
<p>When your Operator metadata is formatted in <code>bundle</code> layout you can optionally add it to the existing directory structure like described in the <a href="#preparing-file-structure">pre-requisites step</a>. For building a catalog this is not required because with Operator <code>bundles</code> versions are incrementally added to an existing or empty catalog.</p>
<p>For example, assuming version <code>2.0.0</code> is the version you like to test:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>tree my-operator/

<span class="go">my-operator/</span>
<span class="go">├── 0.1.0</span>
<span class="go">│   ├── manifests</span>
<span class="go">│   │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">│   │   └── my-operator.v0.1.0.clusterserviceversion.yaml</span>
<span class="go">│   ├── metadata</span>
<span class="go">│   │   └── annotations.yaml</span>
<span class="go">│   └── Dockerfile</span>
<span class="go">├── 0.5.0</span>
<span class="go">│   ├── manifests</span>
<span class="go">│   │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">│   │   └── my-operator.v0.5.0.clusterserviceversion.yaml</span>
<span class="go">│   ├── metadata</span>
<span class="go">│   │   └── annotations.yaml</span>
<span class="go">│   └── Dockerfile</span>
<span class="go">├── 1.0.0</span>
<span class="go">│   ├── manifests</span>
<span class="go">│   │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">│   │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">│   │   └── my-operator.v1.0.0.clusterserviceversion.yaml</span>
<span class="go">│   ├── metadata</span>
<span class="go">│   │   └── annotations.yaml</span>
<span class="go">│   └── Dockerfile</span>
<span class="go">└── 2.0.0</span>
<span class="go">    ├── manifests</span>
<span class="go">    │   ├── my-operator-crd1.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd2.crd.yaml</span>
<span class="go">    │   ├── my-operator-crd3.crd.yaml</span>
<span class="go">    │   └── my-operator.v2.0.0.clusterserviceversion.yaml</span>
<span class="go">    ├── metadata</span>
<span class="go">    │   └── annotations.yaml</span>
<span class="go">    └── Dockerfile</span>
<span class="go">...</span>
</code></pre></div>
<p>Simply build your bundle using the <code>Dockerfile</code> that is part of every Operator bundle. If you are new to this format please consult the <a href="https://github.com/operator-framework/operator-registry/blob/master/docs/design/operator-bundle.md">operator-registry</a> documentation.  If you used <code>operator-sdk</code> to develop your Operator you can also leverage its packaging tooling to <a href="https://sdk.operatorframework.io/docs/olm-integration/quickstart-bundle/#creating-a-bundle">create a bundle</a>.</p>
<p>To build your bundle simply build the image and push it to a registry of your choice:</p>
<div class="highlight"><pre><span></span><code><span class="go">podman build -f 2.0.0/Dockerfile -t my-operator:v2.0.0 2.0.0/</span>
<span class="go">podman push my-operator:v2.0.0 quay.io/myaccount/my-operator:v2.0.0</span>
</code></pre></div>
<p>With the bundle published to a registry you can now leverage <code>opm</code> to add it to the existing catalog of community operators:</p>
<ul>
<li>for OpenShift this is <code>quay.io/openshift-community-operators/catalog:latest</code></li>
<li>for OperatorHub.io this is <code>quay.io/operatorhubio/catalog:latest</code></li>
</ul>
<p><code>opm</code> will create a catalog image with your Operator added, like so:</p>
<div class="highlight"><pre><span></span><code><span class="go">opm index add --bundles quay.io/myaccount/my-operator:v2.0.0 --from-index quay.io/operatorhubio/catalog:latest --tag quay.io/myaccount/my-test-catalog:latest</span>
</code></pre></div>
<p>You then push the resulting catalog image to a registry of your choice as well:</p>
<div class="highlight"><pre><span></span><code><span class="go">podman push quay.io/myaccount/my-test-catalog:latest</span>
</code></pre></div>
<blockquote>
<p><code>opm</code> also supports multiple container tools via the <code>-c</code> switch. You can also omit the final step to build the catalog image and instead output the <code>Dockerfile</code> that would be used. Consult the help output for that via <code>opm index add --help</code></p>
</blockquote>
<p>You now have a catalog image available for OLM to install your Operator version from.</p>
<h2 id="testing-operator-deployment-on-kubernetes">Testing Operator Deployment on Kubernetes</h2>
<h3 id="1-installing-operator-lifecycle-manager">1. Installing Operator Lifecycle Manager</h3>
<p>If you are not using OpenShift you first need to install the Operator Lifecycle Manager on your cluster.</p>
<p>The following steps assume you already have a running Kubernetes cluster that is currently selected as your <code>current-context</code> via <code>kubectl</code>. If you, you can quickly spin up a cluster using tools like <code>KIND</code> or <code>minikube</code> mentioned in the <a href="#pre-requisites">pre-requisites section</a>, e.g.</p>
<div class="highlight"><pre><span></span><code><span class="go">kind create cluster</span>
</code></pre></div>
<p>You can install the Operator Lifecycle Manager using either <code>operator-sdk</code> or <code>kubectl</code>.</p>
<p>Option 1: Install the Operator Lifecycle Manager using <code>operator-sdk</code>:</p>
<p><div class="highlight"><pre><span></span><code><span class="go">operator-sdk olm install</span>
</code></pre></div>
Verify that OLM is installed correctly:</p>
<p><div class="highlight"><pre><span></span><code><span class="go">operator-sdk olm status</span>
</code></pre></div>
This should output something like the following:</p>
<div class="highlight"><pre><span></span><code><span class="go">INFO[0000] Fetching CRDs for version &quot;0.16.1&quot;</span>
<span class="go">INFO[0000] Fetching resources for version &quot;0.16.1&quot;</span>
<span class="go">INFO[0002] Successfully got OLM status for version &quot;0.16.1&quot;</span>

<span class="go">NAME                                            NAMESPACE    KIND                        STATUS</span>
<span class="go">operators.operators.coreos.com                               CustomResourceDefinition    Installed</span>
<span class="go">operatorgroups.operators.coreos.com                          CustomResourceDefinition    Installed</span>
<span class="go">installplans.operators.coreos.com                            CustomResourceDefinition    Installed</span>
<span class="go">clusterserviceversions.operators.coreos.com                  CustomResourceDefinition    Installed</span>
<span class="go">olm-operator                                    olm          Deployment                  Installed</span>
<span class="go">subscriptions.operators.coreos.com                           CustomResourceDefinition    Installed</span>
<span class="go">olm-operator-binding-olm                                     ClusterRoleBinding          Installed</span>
<span class="go">operatorhubio-catalog                           olm          CatalogSource               Installed</span>
<span class="go">olm-operators                                   olm          OperatorGroup               Installed</span>
<span class="go">aggregate-olm-view                                           ClusterRole                 Installed</span>
<span class="go">catalog-operator                                olm          Deployment                  Installed</span>
<span class="go">aggregate-olm-edit                                           ClusterRole                 Installed</span>
<span class="go">olm                                                          Namespace                   Installed</span>
<span class="go">global-operators                                operators    OperatorGroup               Installed</span>
<span class="go">operators                                                    Namespace                   Installed</span>
<span class="go">packageserver                                   olm          ClusterServiceVersion       Installed</span>
<span class="go">olm-operator-serviceaccount                     olm          ServiceAccount              Installed</span>
<span class="go">catalogsources.operators.coreos.com                          CustomResourceDefinition    Installed</span>
<span class="go">system:controller:operator-lifecycle-manager                 ClusterRole                 Installed</span>
</code></pre></div>
<p>Option 2: Install the Operator Lifecycle Manager using <code>kubectl</code>:</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl apply -f https://github.com/operator-framework/operator-lifecycle-manager/releases/download/v0.17.0/crds.yaml</span>
<span class="go">kubectl apply -f https://github.com/operator-framework/operator-lifecycle-manager/releases/download/v0.17.0/olm.yaml</span>
</code></pre></div>
<p>You can check if Operator Lifecycle Manager status via the following command:</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl get pods -n olm</span>
</code></pre></div>
<p>This should output something like the following:</p>
<div class="highlight"><pre><span></span><code>NAME                                READY   STATUS    RESTARTS   AGE
catalog-operator-7b4788ffb5-9jggk   1/1     Running   0          23h
olm-operator-678d76b95c-r492j       1/1     Running   0          23h
operatorhubio-catalog-lqw72         1/1     Running   0          23h
packageserver-7cfd786c67-pwpnn      1/1     Running   0          23h
packageserver-7cfd786c67-tkwbm      1/1     Running   0          23h
</code></pre></div>
<h4 id="troubleshooting">Troubleshooting</h4>
<p>If any problems are encountered at this step, verify that you have enough permissions to install OLM (you need to be <code>cluster-admin</code> to register its CRDs) and create an issue in the <a href="https://github.com/operator-framework/operator-lifecycle-manager/issues">OLM tracker</a>.</p>
<h3 id="2-adding-the-catalog-containing-your-operator">2. Adding the catalog containing your Operator</h3>
<p>Create a <code>CatalogSource</code> instance in the <code>olm</code> namespace to reference in the Operator catalog image that contains your Operator version to test:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">operators.coreos.com/v1alpha1</span><span class="w"></span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CatalogSource</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-test-catalog</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">olm</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">sourceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grpc</span><span class="w"></span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/myaccount/my-test-catalog:latest</span><span class="w"></span>
</code></pre></div>
<p>Deploy the <code>CatalogSource</code> resource:
<div class="highlight"><pre><span></span><code>kubectl apply -f catalog-source.yaml
</code></pre></div></p>
<p><strong>If you created your test catalog containing all existing community operators</strong>, you should delete the default catalog that OLM ships with to avoid a lot of duplicate entries:</p>
<div class="highlight"><pre><span></span><code>kubectl delete catalogsource operatorhubio-catalog -n olm
</code></pre></div>
<p>Verify your custom catalog got loaded:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>kubectl get catalogsource -n olm
<span class="go">NAME                           DISPLAY     TYPE   PUBLISHER   AGE</span>
<span class="go">my-test-catalog                            grpc               3m32s</span>
<span class="go">[...]</span>
</code></pre></div>
<p>Verify the health of your catalog:</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl get catalogsource my-test-catalog -n olm -o yaml</span>
</code></pre></div>
<h4 id="troubleshooting_1">Troubleshooting</h4>
<p>The <code>status</code> section of that object has the <code>lastObservedState</code> condition set to <code>READY</code>. If that is not the case (for example if the condition is set to <code>CONNECTING</code>) check the healthiness of the pod associated with the catalog in the same namespace.</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl get pod -n olm</span>
</code></pre></div>
<p>The name of the pod will carry the name of the <code>CatalogSource</code> object plus 5 random characters. Usually, the source of unhealthy catalogs is catalog pods with pull errors due to missing authentication against the registry or non-existent tags.
If the pod is currently running check its logs:</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl logs my-test-catalog-zcq7h -n olm</span>
</code></pre></div>
<p>If there are errors in this log please raise them in the <code>operator-registry</code> <a href="https://github.com/operator-framework/operator-registry">issue tracker</a> as any problems caused by malformed bundle/packagemanifest metadata should have been caught during catalog creation.</p>
<h3 id="3-view-available-operators">3. View Available Operators</h3>
<p>Inspect the list of loaded <code>packagemanifests</code> on the system with the following command to filter for your Operator</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl get packagemanifests | grep my-operator</span>
</code></pre></div>
<p>The example should look like this:</p>
<div class="highlight"><pre><span></span><code><span class="go">grep my-operator                        1h2m</span>
</code></pre></div>
<p>If your Operator appears in this list, the catalog was successfully parsed and the Operator is now available to install.</p>
<h4 id="troubleshooting_2">Troubleshooting</h4>
<p>If it does not appear in this list return to the previous step and check the logs of the catalog pod. If this does not reveal any error messages check the log of both the <code>packageserver</code> pods of OLM in the <code>olm</code> namespace, e.g.:</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl get logs packageserver-78c99949df-lf26p -n olm</span>
</code></pre></div>
<p>On some occasions the Operator definition is in the catalog but cannot be understood due to some malformed package/bundle content. In this case, the <code>packageserver</code> should present a related error message.
If there are errors in this log please raise them in the <code>operator-registry</code> <a href="https://github.com/operator-framework/operator-registry">issue tracker</a> as any problems caused by malformed bundle/packagemanifest metadata should have been caught during catalog creation.</p>
<h3 id="4-create-an-operatorgroup">4. Create an OperatorGroup</h3>
<p>An <code>OperatorGroup</code> is used to denote which namespaces your Operator should be watching. It must exist in the namespace where your operator should be deployed, we'll use <code>default</code> in this example.
Its configuration depends on whether your Operator supports watching its own namespace, a single other namespace or all namespaces (as indicated by <code>spec.installModes</code> in the CSV).</p>
<p>Create the following file as <code>operator-group.yaml</code> if your Operator supports watching its own or a single namespace.</p>
<blockquote>
<p>If your Operator supports watching all namespaces you can skip this step and proceed to creating the <code>Subscription</code> object in the <code>operators</code> namespace. An <code>OperatorGroup</code> already exists there with <code>spec.targetNamespace</code> empty. This kind of <code>OperatorGroup</code> instructs the Operator to watch all namespaces.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">operators.coreos.com/v1alpha2</span><span class="w"></span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OperatorGroup</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-operatorgroup</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">targetNamespaces</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
</code></pre></div>
<p>Deploy the <code>OperatorGroup</code> resource:</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl apply -f operator-group.yaml</span>
</code></pre></div>
<h3 id="5-create-a-subscription">5. Create a Subscription</h3>
<p>The last step is to ask OLM to install your Operator. A <code>Subscription</code> is created to represent the intent to install an Operator and keep it updated (automatically even) with a newer version from the catalog. This requires you to tell OLM which Operator, in which version from which channel you want to install and where the catalog is, that contains the Operator.</p>
<p>Save the following to a file named: <code>operator-subscription.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">operators.coreos.com/v1alpha1</span><span class="w"></span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Subscription</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-operator-subscription</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">channel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;channel-name&gt;</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-operator</span><span class="w"></span>
<span class="w">  </span><span class="nt">startingCSV</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-operator.v2.0.0</span><span class="w"></span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-test-catalog</span><span class="w"></span>
<span class="w">  </span><span class="nt">sourceNamespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">olm</span><span class="w"></span>
</code></pre></div>
<p>If your Operator supports watching all namespaces, change the <code>Subscription</code> namespace from <code>default</code> to <code>operators</code>. (This namespace already has an <code>OperatorGroup</code>).</p>
<p>In any case, replace <code>&lt;channel-name&gt;</code> with the contents of <code>channel.name</code> in your <code>package.yaml</code> file if you have the <code>packagemanifest</code> format or with the contents from <code>operators.operatorframework.io.bundle.channels.v1</code> in <code>annotations.yaml</code> if you have the <code>bundle</code> format.</p>
<p>Then create the <code>Subscription</code>:</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl apply -f operator-subscription.yaml</span>
</code></pre></div>
<h4 id="troubleshooting_3">Troubleshooting</h4>
<p>Note that the <code>Subscription</code> object is not representing your installed Operator (this is the object in the next step). It only instructs OLM to install your Operator and keep it updated (automatically). Any error message in the <code>Subscription</code> status refers to the attempt to install the Operator from the catalog, which is usually caused by incorrect references to the catalog (types in the name of the Operator, catalog, namespace, etc).</p>
<h3 id="6-verify-operator-health">6. Verify Operator health</h3>
<p>Watch your Operator being deployed by OLM from the catalog with the following command. Change the namespace from <code>default</code> to <code>operators</code> if you installed your <code>Subscrption</code> there. Use the watch switch <code>-w</code>:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>kubectl get clusterserviceversion -n default -w
<span class="go">NAME                     DISPLAY          VERSION   REPLACES                PHASE</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0      Pending</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0      InstallReady</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0      Installing</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0      Installing</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0      Installing</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0      Installing</span>
<span class="go">my-operator.v2.0.0       My Operator      2.0.0     my-operator.v1.0.0      Succeeded</span>
</code></pre></div>
<p>The <code>ClusterServiceVersion</code> object represents your installed Operator per version. It can take a couple of seconds to be created as part of the <code>Subscription</code> request. There will always be a <code>ClusterServiceVersion</code> in the namespace of the <code>Subscription</code>. If the <code>OperatorGroup</code> was configured to "watch" a list of all namespaces, the <code>ClusterServiceVersion</code> object will be copied to all those namespaces. This might take additional time (usually around 30 secs).</p>
<p>If the above command succeeds and the <code>ClusterServiceVersion</code> has transitioned to the <code>Succeeded</code> phase you will also find your Operator's <code>Deployment(s)</code> in the same namespace where the <code>Subscription</code> is. This is your Operator running:</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl get deployment -n default</span>
</code></pre></div>
<h4 id="troubleshooting_4">Troubleshooting</h4>
<p>If the <code>ClusterServiceVersion</code> is in a pending or failed state, problems occurred when trying to install the Operator. There are two common sources: the components that make up the Operator and the Operator binary itself.</p>
<p>Problems with the Operator process itself will result in a <code>Deployment</code> that is unhealthy, either due to a crashing Operator pod or other image level problems. In this case, debug the <code>Deployment</code> and Operator logs for any error message. Usually, there are either bugs in the Operator or insufficient permissions in the RBAC part of the bundle/package metadata which may crash poorly written Operators.</p>
<p>Problems with installing the Operator components can be debugged with the <code>InstallPlan</code> object. It contains a blueprint of the Operator and lists all the Kubernetes resources that are required for the Operator to function. It is automatically created by OLM and linked to the <code>Subscription</code>. If the <code>Subscription</code> created an <code>InstallPlan</code> you can refer to it via the status block of the <code>Subscription</code>: <code>.status.InstallPlan</code> contains the name of the <code>InstallPlan</code> object which is always in the same namespace as the <code>Subscription</code>.</p>
<div class="highlight"><pre><span></span><code><span class="go">kubectl describe subscription my-operator-subscription -n default</span>

<span class="go">...</span>
<span class="go">Status:</span>
<span class="go">...</span>

<span class="go">  Installplan:</span>
<span class="go">    API Version:  operators.coreos.com/v1alpha1</span>
<span class="go">    Kind:         InstallPlan</span>
<span class="go">    Name:         install-2c8lf</span>
<span class="go">    Uuid:         656e2e6b-582a-46e1-867d-4f7e95c24136</span>
<span class="go">  Last Updated:   2020-11-01T19:38:01Z</span>
<span class="go">  State:          AtLatestKnown</span>
<span class="go">Events:           &lt;none&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">kubectl describe installplan install-2c8lf -n default</span>
</code></pre></div>
<p>This will likely be a lengthy output due to the content of every component of the Operator returned. However, in the <code>.status</code> block of this object, the name and health of every component is displayed. Problems with <code>InstallPlan</code> components usually stem from malformed components, insufficient permissions, collisions with existing objects etc. It usually needs to be corrected at the Operator metadata level.</p>
<h2 id="testing-operator-deployment-on-openshift">Testing Operator Deployment on OpenShift</h2>
<p>The process to test on OpenShift Container Platform and OKD 4.3 or newer is exactly the same as described <a href="#testing-operator-deployment-on-kubernetes">above</a> with the exception that OLM is already installed. You can use the same CLI steps to test your Operator but it can however also be done via the UI.</p>
<h3 id="1-create-the-catalogsource">1. Create the CatalogSource</h3>
<p>Create a <code>CatalogSource</code> instance in the <code>openshift-marketplace</code> namespace to reference the Operator catalog image that contains your Operator version to test:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">operators.coreos.com/v1alpha1</span><span class="w"></span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CatalogSource</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-test-catalog</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openshift-marketplace</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">sourceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grpc</span><span class="w"></span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/myaccount/my-test-catalog:latest</span><span class="w"></span>
</code></pre></div>
<p>You can use the OpenShift Console YAML editor for that or deploy the <code>CatalogSource</code> resource on the CLI:</p>
<div class="highlight"><pre><span></span><code><span class="go">oc apply -f catalog-source.yaml</span>
</code></pre></div>
<p><strong>If you created your test catalog containing all existing community operators</strong>, you should delete the default catalog that OLM ships with to avoid a lot of duplicate entries. To do this navigate to <strong>Administration</strong> on the main navigation bar on the left and select the <strong>Cluster Settings</strong> item.  In this view, select the <strong>Global Configuration</strong> tab and filter for <code>OperatorHub</code>:</p>
<p><img alt="OpenShift Cluster Settings" src="../images/openshift-cluster-configuration.png" /></p>
<p>Click on the <code>OperatorHub</code> item and select the <strong>YAML</strong> tab. In the YAML editor set the <code>disabled</code> property for the <code>community-catalog</code> to <code>true</code>:</p>
<p><img alt="OpenShift OperatorHub Settings" src="../images/openshift-operatorhub-settings.png" /></p>
<p>Click <strong>Save</strong>.</p>
<h3 id="2-find-your-operator-in-the-operatorhub-ui">2. Find your Operator in the OperatorHub UI</h3>
<p>Go to your OpenShift UI and find your Operator by filtering for the <em>Custom</em> category:
<img alt="Find your Operator in OperatorHub" src="../images/my-operator-in-hub.png" /></p>
<h3 id="3-install-your-operator-from-operatorhub">3. Install your Operator from OperatorHub</h3>
<p>To install your Operator simply click its icon and in the proceeding dialog click <em>Install</em>.
<img alt="Install your Operator from OperatorHub" src="../images/my-operator-install.png" />
 You will be asked where to install your Operator. Select either of the desired installation modes, if your Operator supports it and then click <em>Subscribe</em>
<img alt="Install your Operator from OperatorHub" src="../images/my-operator-subscription.png" />
You will be forwarded to the <em>Subscription Management</em> section of the OLM UI and after a couple of moments, your Operator will be transitioning to <em>Installed</em>.
<img alt="Subscribe to your Operator from OperatorHub" src="../images/my-operator-subscribed.png" /></p>
<h3 id="4-verify-operator-health">4. Verify Operator health</h3>
<p>Change to the <em>Installed Operators</em> section in the left-hand navigation menu to verify your Operator's installation status:
<img alt="See your installed Operator" src="../images/my-operator-installed.png" />
It should have transitioned into the state <em>InstallationSucceeded</em>. You can now test it by starting to use its APIs.</p>
<h2 id="testing-with-scorecard">Testing with scorecard</h2>
<p>If your Operator is up and running you can verify it is working as intended using its APIs. Additionally, you can run <a href="https://sdk.operatorframework.io/docs/advanced-topics/scorecard/scorecard/">operator-sdk</a>'s <code>scorecard</code> utility for validating against good practice and correctness of your Operator.
Assuming you are still in your top-level directory where <code>my-operator/</code> is your bundle location follow these instructions to test your Operator using the <code>Operator-SDK</code>: <a href="https://sdk.operatorframework.io/docs/advanced-topics/scorecard/scorecard/#running-the-scorecard">Running your Operator with scorecard</a></p>
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><a href="https://github.com/operator-framework/operator-lifecycle-manager/blob/master/doc/design/building-your-csv.md">Cluster Service Version Spec</a></li>
<li><a href="https://github.com/operator-framework/bundle-example">Example Bundle</a></li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../packaging-required-fields/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Required fields" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Required fields
            </div>
          </div>
        </a>
      
      
        
        <a href="../operator-test-suite/" class="md-footer__link md-footer__link--next" aria-label="Next: Via test suite" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Via test suite
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "toc.integrate"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": 0.1}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>