
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name="generator"/>
<title>Maintainer - Community operators</title>
<link href="../assets/stylesheets/main.975780f9.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="None" data-md-color-primary="None" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#testing-pipeline-maintainer-documentation">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-component="outdated" hidden="">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Community operators" class="md-header__button md-logo" data-md-component="logo" href=".." title="Community operators">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Community operators
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Maintainer
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/operator-framework/community-operators" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    community-operators
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
      Overview
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../packaging-operator/">
        Packaging your Operator for OperatorHub
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../testing-operators/">
        Testing
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../contributing-prerequisites/">
        Contributing
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../operator-release-process/">
      Release process
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../action/">
      Github Action
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../best-practices/">
      Best practices
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../troubleshooting/">
      Troubleshooting
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="./">
      Maintainer
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../stats/">
      Statistics
    </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Community operators" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Community operators">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Community operators
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/operator-framework/community-operators" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    community-operators
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Overview
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          Packaging your Operator for OperatorHub
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Packaging your Operator for OperatorHub" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Packaging your Operator for OperatorHub
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../packaging-operator/">
        Operator structure
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../packaging-required-fields/">
        Required fields
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          Testing
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Testing" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Testing
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../testing-operators/">
        Explained
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../operator-test-suite/">
        Via test suite
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
          Contributing
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Contributing" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../contributing-prerequisites/">
        Prerequisites
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contributing-where-to/">
        Where to place operator
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contributing-via-pr/">
        Creating pull request (PR)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../operator-ci-yaml/">
        Operator Publishing / Review settings
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tests-in-pr/">
        Tests in PR explained
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../operator-version-update/">
        Updating existing Operators
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../operator-overwrite/">
        Updating published Operator version
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../self-merge-updates/">
        How do i deploy operator faster?
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../packaging-required-criteria-ocp/">
        OKD/OpenShift Catalogs criteria and options
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../operator-release-process/">
        Release process
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../action/">
        Github Action
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../best-practices/">
        Best practices
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../troubleshooting/">
        Troubleshooting
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Maintainer
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Maintainer
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-pipeline-maintainer-documentation">
    Testing pipeline maintainer documentation
  </a>
<nav aria-label="Testing pipeline maintainer documentation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
    Overview
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-package-validated-label-is-missing">
    The package-validated label is missing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-installation-validated-label-is-missing">
    The installation-validated label is missing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-authorized-changes-label-is-missing">
    The authorized-changes label is missing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changes-to-an-existing-operator">
    Changes to an existing operator
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dco-failed">
    DCO failed
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#everything-is-green-but-not-merged">
    Everything is green but not merged
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#release-pipeline-maintainer-documentation">
    Release pipeline maintainer documentation
  </a>
<nav aria-label="Release pipeline maintainer documentation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pr-title-flags">
    PR title flags
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#operators-not-released-only-merged-because-of-installation_skip">
    Operators not released, only merged because of installation_skip
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verify-index">
    Verify index
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#placeholders-to-reserve-an-operator-name-for-future-prs">
    Placeholders to reserve an operator name for future PRs
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../stats/">
        Statistics
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/operator-framework/community-operators/edit/master/docs/maintainer-documentation.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1>Maintainer</h1>
<h2 id="testing-pipeline-maintainer-documentation">Testing pipeline maintainer documentation</h2>
<p>This documentation is focused on OCP (o7t - Openshift) operators. A maintainer is responsible for PR review on the following link </p>
<ul>
<li><a href="https://github.com/redhat-openshift-ecosystem/community-operators-prod/pulls">https://github.com/redhat-openshift-ecosystem/community-operators-prod/pulls</a></li>
</ul>
<h3 id="overview"><strong>Overview</strong></h3>
<div class="admonition info">
<p class="admonition-title">The first part is related to the testing pipeline and how to get a PR green and merged. For failed operator release handling, please jump to <a href="#release-pipeline-maintainer-documentation">Release pipeline maintainer documentation</a>.</p>
</div>
<p>When a pull request (PR) is opened, tests are automatically triggered to ensure that it meets all quality standards. Tests produce labels. If the PR passes these tests, it is automatically merged, and the new operator is published to a specific index. </p>
<div class="admonition warning">
<p class="admonition-title">Do use the <code>merge</code> button. It can cause a failed release. Always make PR green and it will be merged automatically. To restart a test use <code>/retest</code> comment or as a last resort close and reopen a PR.</p>
</div>
<p>For an automatic merge to be executed non of <code>*-failed</code> labels, the following three labels must be present:</p>
<pre class="mermaid"><code>graph LR
id7([package-validated])  --&gt; id1(automatc merge is triggered)
id10([installation-validated]) --&gt; id1(automatc merge is triggered)
id11([authorized-changes]) --&gt; id1(automatc merge is triggered)</code></pre>
<p>When a PR is opened, the original title is automatically replaced with a standardized one containing operator versions that were changed. There is also a flag in square braces indicating things like the single version will be overwritten including bundle delete and create and so on. More info is in the <a href="#pr-flags">release</a> pipeline section](#pr-flags). Don't worry about deleted bundles, there is still a copy available, so existing indexes will work as designed.</p>
<p>We will go over situations when some label is missing or something went wrong in the following paragraphs.</p>
<h3 id="the-package-validated-label-is-missing"><strong>The package-validated label is missing</strong></h3>
<pre class="mermaid"><code>graph LR
id7(Operator test / kiwi / Full operator test)  --&gt; id1([package-validated])
id10(Operator test / lemon / Deploy from scratch) --&gt; id1([package-validated])
id11(Operator test / orange / Deploy o7t) --&gt; id1([package-validated])</code></pre>
<p>To ensure that a release pipeline will not fail, a simulated local release is triggered. It is executing the same steps as sharp lease, the only difference is that everything is happening locally and not pushing to any official registry.</p>
<p>When a simulated release to an index was successful, the label <code>package-validated</code> is applied.</p>
<p>There are three tests as described below.</p>
<h4 id="orange-test">Orange test</h4>
<p>Simulating a release of an affected operator to the current index(es). Helpful to prevent future failures on current indexes.</p>
<h4 id="lemon-test">Lemon test</h4>
<p>It catches incompatibilities in a release of a new index from scratch. Orange, lemon  and kiwi  have to obtain <code>package-validated</code> label.</p>
<h4 id="kiwi-test">Kiwi test</h4>
<p>Basic checks like linting.</p>
<h3 id="the-installation-validated-label-is-missing"><strong>The installation-validated label is missing</strong></h3>
<p>This means that the pipeline can install the operator.</p>
<p>For OCP, prow jobs for every supported OCP are triggered.</p>
<h4 id="prow-job">Prow job</h4>
<p>For every index we support, a dedicated cluster is started and we are testing if operator installation without any problems. If the operator will not be released to some cluster, an installation test is not needed. In this case, a specific installation test passes early without any installation attempt.</p>
<p>To debug a red prow job go to </p>
<p><code>Details -&gt; Artifacts -&gt; artifacts/deploy-operator-on-openshift/deploy-operator/build-log.txt</code></p>
<p><img alt="PR" src="../images/maintainer-prow-details.png"/></p>
<p><img alt="PR" src="../images/maintainer-prow-artifacts.png"/></p>
<p>When all supported OCP clusters are green a label <code>installation-validated</code> is applied.
<pre class="mermaid"><code>graph LR
ci/prow/4.8-deploy-operator-on-openshift --&gt; id123([installation-started-4.8]) --&gt; id23([installation-validated-4.8])
ci/prow/4.9-deploy-operator-on-openshift --&gt; id133([installation-started-4.9]) --&gt; id24([installation-validated-4.9])
ci/prow/4.10-deploy-operator-on-openshift --&gt; id143([installation-started-4.10]) --&gt; id25([installation-validated-4.10])
ci/prow/4.11-deploy-operator-on-openshift --&gt; id153([installation-started-4.11]) --&gt; id26([installation-validated-4.11])
ci/prow/4.12-deploy-operator-on-openshift --&gt; id163([installation-started-4.12]) --&gt; id27([installation-validated-4.12])

id123([installation-started-4.8]) --&gt; id28([installation-failed-4.8])
id133([installation-started-4.9]) --&gt; id29([installation-failed-4.9])
id143([installation-started-4.10]) --&gt; id30([installation-failed-4.10])
id153([installation-started-4.11]) --&gt; id31([installation-failed-4.11])
id163([installation-started-4.12]) --&gt; id32([installation-failed-4.12])

id23([installation-validated-4.8]) --&gt; id33([installation-validated])
id24([installation-validated-4.9]) --&gt; id33([installation-validated])
id25([installation-validated-4.10]) --&gt; id33([installation-validated])
id26([installation-validated-4.11]) --&gt; id33([installation-validated])
id27([installation-validated-4.12]) --&gt; id33([installation-validated])</code></pre></p>
<h5 id="the-label-openshift-started-version-is-present-after-a-couple-of-hours">The label <code>openshift-started-&lt;VERSION&gt;</code> is present after a couple of hours</h5>
<p>In case of <code>openshift-started-&lt;VERSION&gt;</code> label is present and prow job is not running, it means that the temporary index was triggered but not finished and failed due to some reason. You can inspect it on <a href="https://github.com/redhat-openshift-ecosystem/community-operators-prod/actions/workflows/prepare_test_index.yaml"><code>Actions -&gt; Prepare Test Index</code></a>.</p>
<h3 id="the-authorized-changes-label-is-missing"><strong>The authorized-changes label is missing</strong></h3>
<p><pre class="mermaid"><code>graph LR
id1(Operator CI Labels / authorized-changes-handler) --&gt; id2([authorized-changes])</code></pre>
There are a few reasons why the <code>authorized-changes</code> label may be missing from a PR:</p>
<h4 id="new-operator-label-is-present">New-operator label is present</h4>
<p>If the <code>new-operator</code> label is present, the following steps should be taken:</p>
<ol>
<li>Copy the contents of the <code>clusterserviceversion.yaml</code> file to <a href="https://operatorhub.io/preview">https://operatorhub.io/preview</a></li>
<li>Visually inspect the content to ensure that it looks correct and that all fields on the right do not contain <code>N/A</code>, except for the channel field. The channel field cannot display any information.</li>
</ol>
<h4 id="no-reviewer-in-ciyaml-file">No reviewer in <code>ci.yaml</code> file</h4>
<p>If the <code>authorized-changes</code> label is missing and the <code>ci.yaml</code> file does not include a reviewer, the following step should be taken:</p>
<ul>
<li>Apply the authorized-changes label to the PR.</li>
</ul>
<h4 id="an-author-is-not-in-the-reviewer-list-in-ciyaml-and-ciyaml-file-was-not-modified">An author is not in the reviewer list in <code>ci.yaml</code> and <code>ci.yaml</code> file was not modified</h4>
<p>If the <code>@contributor_name please approve</code> message is displayed, indicating that the author of the PR is not in the reviewer list in the <code>ci.yaml</code> file and the <code>ci.yaml</code> file has not been modified, the following steps should be taken:</p>
<ol>
<li>Wait for approval from a reviewer who is listed in the <code>ci.yaml</code> file.</li>
<li>If the <code>authorized-changes</code> label is not set after the approval, follow one of the three options documented <a href="https://redhat-openshift-ecosystem.github.io/community-operators-prod/self-merge-updates/#how-can-i-approve-a-pr-against-my-operator">here</a> to set it.</li>
</ol>
<h4 id="an-author-is-not-in-the-reviewer-list-in-ciyaml-and-ciyaml-file-is-modified">An author is not in the reviewer list in <code>ci.yaml</code> and <code>ci.yaml</code> file is modified</h4>
<p>If the <code>/hold Please note that ci.yaml was changed</code> message is displayed, indicating that the author of the PR is not in the reviewer list in the <code>ci.yaml</code> file and the <code>ci.yaml</code> file has been modified, the following steps should be taken:</p>
<ol>
<li>Wait for approval from a reviewer who is listed in the <code>ci.yaml</code> file.</li>
<li>If necessary, add the <code>/unhold</code> command to the PR to trigger the worklfow.</li>
<li>If the <code>authorized-changes</code> label is not set after approval, follow one of the three options documented <a href="https://redhat-openshift-ecosystem.github.io/community-operators-prod/self-merge-updates/#how-can-i-approve-a-pr-against-my-operator">here</a>.</li>
</ol>
<h3 id="changes-to-an-existing-operator"><strong>Changes to an existing operator</strong></h3>
<p>In an ideal world, a contributor is opening a new PR with a new operator version every time. However, in reality, the contributor needs to update an existing operator in rare cases. A current pipeline allows it because it always removes an existing package from an index and also creates a new bundle with the same tag if needed.</p>
<p>In general, it is not recommended to overwrite an existing operator version. But if there is some typo in the description or something cosmetic. </p>
<p>The current setup allows cosmetic changes defined in <a href="https://github.com/redhat-openshift-ecosystem/operator-test-playbooks/blob/upstream-community/upstream/local.yml"><code>local.yml</code></a> as <code>dc_changes_allowed</code> variable.</p>
<p>Pipeline detects a cosmetic change and removes the whole package from an index, then adds the package in the current state containing already changed (new) bundles.</p>
<p>In some cases, a contributor may have a strong reason to make more significant changes to an existing operator. When a maintainer decides that this reason is valid an exception can be made. Applying <code>allow/serious-changes-to-existing</code> label will not fail on noncosmetic change then.</p>
<h3 id="dco-failed"><strong>DCO failed</strong></h3>
<p>The pipeline is checking if every commit is signed. This is an easy fix, just follow the steps under <code>Details</code> belonging to DCO test.</p>
<h3 id="everything-is-green-but-not-merged"><strong>Everything is green but not merged</strong></h3>
<p>There can be a case when <code>do-not-merge/hold</code> label is present. If the <code>openshift-robot</code> has added it, please remove it. If a contributor has added it, ask for removal. </p>
<h2 id="release-pipeline-maintainer-documentation">Release pipeline maintainer documentation</h2>
<p>When all conditions are met, the operator has merged automatically and a release pipeline is triggered at  <a href="https://github.com/redhat-openshift-ecosystem/community-operators-prod/actions/workflows/operator_release.yaml">https://github.com/redhat-openshift-ecosystem/community-operators-prod/actions/workflows/operator_release.yaml</a>.   </p>
<p>The release pipeline is not just releasing a single merged operator. Rather it is based on synchronization. So after merging multiple operators at once. Despite the operators being in different PRs, the first release will detect differences and sync every missing operator to related indexes.</p>
<h3 id="pr-title-flags">PR title flags</h3>
<p>The PR title is changed Every release pipeline run is named by an operator name, the version in brackets and one of the following flags in square brackets:</p>
<ul>
<li>[N] - means a new operator, universal sync is executed</li>
<li>[O] - operator-specific version overwrite, deleting bundles from repositories (copies are not deleted)</li>
<li>[CI] - ci files changed, merging only</li>
<li>[R] - operator-specific re-create, deleting all bundles in a package</li>
<li>no flag - universal sync, restarting will automatically sync missing operators</li>
</ul>
<p>In many cases, just a pipeline restart is needed. However, if a sync failed, any sync can be restarted to fix it. If <code>[O]</code> or<code>[R]</code> failed, you need to restart this specific run.</p>
<p>All releases have the same steps. The only difference for <code>[O]</code> or<code>[R]</code> flagged releases is that in <code>Remove</code> step there is an additional action:</p>
<ul>
<li><code>[O]</code> - delete a single bundle image from the registry and preserve copies</li>
<li><code>[R]</code> - delete all bundle images related to the package and preserve copies</li>
</ul>
<pre class="mermaid"><code>graph TD
id1(PR-traffic-light) --&gt; id2(Remove) --&gt; id3(Index check) --&gt; id4(Bundles) --&gt; id5(Index) --&gt; id6(Index verify) --&gt; id7(Slack notification)</code></pre>
<h3 id="operators-not-released-only-merged-because-of-installation_skip">Operators not released, only merged because of <code>installation_skip</code></h3>
<p>If there is some strong reason not to trigger a test and release, an operator is just merged. For example, operators named <code>ack*</code> have around 10 PRs opened at the same time. This merges 10 operators at the same time. In this case, 10 pipeline runs can be ineffective because we need just a single pipeline run to synchronize everything. </p>
<div class="admonition info">
<p class="admonition-title">Operator with <code>installation-skipped</code> PR label is just merged and will be released with the next operator.</p>
</div>
<p>In rare cases, there is no other pipeline run triggered, please restart some pipeline runs with no flag inside square braces.</p>
<h3 id="verify-index">Verify index</h3>
<p>The <code>Verify index</code> job is checking count of versions for each operator between two internal indexes (tag, sha) and final productions. If the version count is not equal for all three indexes then the job fails and produces a list of failed operators. The following example shows that <code>bookkeeper-operator</code> and <code>zookeeper-operator</code> are not in sync.</p>
<p><img alt="Verify index fail" src="../images/verify_index_fail.png"/></p>
<p>One should recreate these operators for specific indexes by asking the project admin to run <code>manual release</code> job with the following setting.</p>
<p><img alt="Manual Release when verify index fail" src="../images/manual_release_verify_index_fail.png"/></p>
<h3 id="placeholders-to-reserve-an-operator-name-for-future-prs">Placeholders to reserve an operator name for future PRs</h3>
<p>If a contributor needs to reserve an operator name, it is possible to open a PR with just a <code>ci.yaml</code> file in an operator directory. Pipeline supports such functionality and skipping tests and release.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Troubleshooting" class="md-footer__link md-footer__link--prev" href="../troubleshooting/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Troubleshooting
            </div>
</div>
</a>
<a aria-label="Next: Statistics" class="md-footer__link md-footer__link--next" href="../stats/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Statistics
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "toc.integrate"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": 0.1}</script>
<script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
</body>
</html>